<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Fetch seismic data from web-service and calculate RF automatically" href="rf-from-ws.html" /><link rel="prev" title="Calculate a P-wave Receiver Function (PRF)" href="PRF_Process.html" />
        <link rel="canonical" href="seispy.xumijian.me/usage/rf-sta.html" />

    <link rel="shortcut icon" href="../_static/seispy_100.png"/><!-- Generated with Sphinx 8.2.1 and Furo 2024.08.06 -->
        <title>Calculate PRFs for single station - Seispy v1.3.10 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #0080C4;
  --color-brand-content: #0080C4;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Seispy v1.3.10 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/seispy-long.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Seispy v1.3.10 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Getting Started</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Getting Started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="PRF_Process.html">Calculate a P-wave Receiver Function (PRF)</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Calculate PRFs for single station</a></li>
<li class="toctree-l2"><a class="reference internal" href="rf-from-ws.html">Fetch seismic data from web-service and calculate RF automatically</a></li>
<li class="toctree-l2"><a class="reference internal" href="srf.html">Calculate S wave Receiver Functions (SRF) for single station</a></li>
<li class="toctree-l2"><a class="reference internal" href="pickrf.html">Visual check PRFs with an user interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="ps-depth.html">Relationship between time difference and depth in 1D velocity model.</a></li>
<li class="toctree-l2"><a class="reference internal" href="ccp.html">Stack PRFs with Common Conversion points (CCP) method</a></li>
<li class="toctree-l2"><a class="reference internal" href="pickdepths.html">Visually pick depth of the discontinuities after CCP stacking</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../examples/index.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/ex-prf.html">PRFs calculation and H-k stacking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/ex-ccp.html">Batch calculation and CCP stacking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/ex-ccp3d.html">3-D CCP stacking for mantle transition zone structure under the Tibet.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/ex-rfani.html">Crustal anisotropic estimation with a single station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/ex-harmo.html">Harmonic decomposition</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../notes/index.html">Configurations</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Configurations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../notes/rf_cfg.html">RF calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notes/hk_cfg.html">Hk stacking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notes/ccp_cfg.html">CCP stacking</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../modules.html">Module Index</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Module Index</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../rf.html">RF package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../post.html">Post-processing package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ccp.html">CCP package</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/xumi1993/seispy">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://gitlab.com/xumi1993/seispy">GitLab</a></li>
<li class="toctree-l1"><a class="reference external" href="https://anaconda.org/conda-forge/seispy">Anaconda</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/python-seispy/">PyPI</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/usage/rf-sta.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section class="tex2jax_ignore mathjax_ignore" id="calculate-prfs-for-single-station">
<h1>Calculate PRFs for single station<a class="headerlink" href="#calculate-prfs-for-single-station" title="Link to this heading">¶</a></h1>
<section id="prepare-seismic-records-order-by-stations">
<h2>Prepare seismic records order by stations<a class="headerlink" href="#prepare-seismic-records-order-by-stations" title="Link to this heading">¶</a></h2>
<p>Seismic data including direct P arrival should be trimmed according earthquakes. Meanwhile, the data should be order by stations instead of events. For example, YN001 and YN002 are stations; the SAC files are teleseismic data records of these stations.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    event_data/
    ├── YN001
    │   ├── 2018.229.15.35.02.1.sac
    │   ├── 2018.229.15.35.02.2.sac
    │   ├── 2018.229.15.35.02.3.sac
    │   ├── 2018.229.22.06.55.1.sac
    │   ├── 2018.229.22.06.55.2.sac
    │   │......
    ├── YN002
    │   ├── 2018.229.15.35.02.1.sac
    │   ├── 2018.229.15.35.02.2.sac
    │   ├── 2018.229.15.35.02.3.sac
    │   ├── 2018.229.22.06.55.1.sac
    │   ├── 2018.229.22.06.55.2.sac
    │   │......
</pre></div>
</div>
</section>
<section id="calculate-prfs-using-a-simple-command">
<h2>Calculate PRFs using a simple command<a class="headerlink" href="#calculate-prfs-using-a-simple-command" title="Link to this heading">¶</a></h2>
<section id="prepare-a-configure-file">
<h3>Prepare a configure file<a class="headerlink" href="#prepare-a-configure-file" title="Link to this heading">¶</a></h3>
<p>We should prepare a configure file as following including all parameters that will be set during the calculation. The format is following Python module of <a class="reference external" href="https://docs.python.org/3/library/configparser.html">configparser</a>. We have provided a template configure file in <a class="reference internal" href="../notes/rf_cfg.html"><span class="doc">RF calculation</span></a>. See comment in detail.</p>
</section>
</section>
<section id="run-in-command-line">
<h2>Run in command line<a class="headerlink" href="#run-in-command-line" title="Link to this heading">¶</a></h2>
<p>We have provided the command <code class="docutils literal notranslate"><span class="pre">prf</span></code>. The usage is shown as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">prf</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">l</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">r</span> <span class="n">N</span><span class="o">|</span><span class="n">E</span><span class="o">|</span><span class="n">NE</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">s</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">b</span> <span class="p">[</span><span class="n">BAZ</span><span class="p">]]</span> <span class="p">[</span><span class="o">-</span><span class="n">w</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">f</span> <span class="n">finallist</span><span class="p">]</span> <span class="n">cfg_file</span>

  <span class="n">Calculating</span> <span class="n">RFs</span> <span class="k">for</span> <span class="n">single</span> <span class="n">station</span>

  <span class="n">positional</span> <span class="n">arguments</span><span class="p">:</span>
    <span class="n">cfg_file</span>      <span class="n">Path</span> <span class="n">to</span> <span class="n">RF</span> <span class="n">configure</span> <span class="n">file</span>

  <span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
    <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>    <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
    <span class="o">-</span><span class="n">l</span>            <span class="n">use</span> <span class="n">local</span> <span class="n">catalog</span><span class="p">,</span> <span class="n">defaults</span> <span class="n">to</span> <span class="n">false</span>
    <span class="o">-</span><span class="n">r</span> <span class="n">N</span><span class="o">|</span><span class="n">E</span><span class="o">|</span><span class="n">NE</span>     <span class="n">Reverse</span> <span class="n">components</span><span class="p">:</span> <span class="n">N</span><span class="p">,</span> <span class="n">E</span> <span class="ow">or</span> <span class="n">NE</span>
    <span class="o">-</span><span class="n">s</span>            <span class="n">Switch</span> <span class="n">the</span> <span class="n">East</span> <span class="ow">and</span> <span class="n">North</span> <span class="n">components</span>
    <span class="o">-</span><span class="n">b</span> <span class="p">[</span><span class="n">BAZ</span><span class="p">]</span>      <span class="n">Correct</span> <span class="n">back</span><span class="o">-</span><span class="n">azimuth</span><span class="o">.</span> <span class="n">If</span> <span class="s2">&quot;baz&quot;</span> <span class="ow">is</span> <span class="n">specified</span><span class="p">,</span> <span class="n">the</span> <span class="n">corr_baz</span> <span class="o">=</span> <span class="n">raw_baz</span> <span class="o">+</span> <span class="n">baz</span><span class="o">.</span> <span class="n">If</span> <span class="n">there</span> <span class="ow">is</span> <span class="n">no</span> <span class="n">argument</span><span class="p">,</span> <span class="n">the</span> <span class="n">back</span><span class="o">-</span><span class="n">azimuth</span> <span class="n">will</span> <span class="n">be</span> <span class="n">corrected</span> <span class="k">with</span> <span class="n">minimal</span> <span class="n">energy</span>
                  <span class="n">of</span> <span class="n">T</span> <span class="n">component</span><span class="o">.</span> <span class="n">The</span> <span class="n">searching</span> <span class="nb">range</span> <span class="ow">is</span> <span class="n">raw_baz</span> <span class="o">+/-</span> <span class="mi">90</span>
    <span class="o">-</span><span class="n">w</span>            <span class="n">Write</span> <span class="n">project</span> <span class="n">to</span> <span class="n">localfile</span>
    <span class="o">-</span><span class="n">f</span> <span class="n">finallist</span>  <span class="n">Specify</span> <span class="n">finallist</span> <span class="k">for</span> <span class="n">re</span><span class="o">-</span><span class="n">calculating</span> <span class="n">RFs</span> <span class="ow">and</span> <span class="o">-</span><span class="n">l</span> <span class="ow">is</span> <span class="n">invalid</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">pattern</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cfg_file</span></code>: configure file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-l</span></code> if the argument was specified, a local file of catalog would be used in searching earthquakes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-r</span></code> Reverse the horizontal components. The arguments should be in <code class="docutils literal notranslate"><span class="pre">EN</span></code>, <code class="docutils literal notranslate"><span class="pre">E</span></code> or <code class="docutils literal notranslate"><span class="pre">N</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-s</span></code> If this option is specified, the East and North components would be changed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-b</span></code> Correct back-azimuth. If <span class="math notranslate nohighlight">\(baz\)</span> is specified, the <span class="math notranslate nohighlight">\(baz_{corr} = baz_{raw} + baz\)</span>. If no arguments following <code class="docutils literal notranslate"><span class="pre">-b</span></code>,  back-azimuth will be corrected for grid searching minimal energy of T component. The searching range is <span class="math notranslate nohighlight">\(baz_{raw} \pm 90^{\circ}\)</span></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-f</span></code> Add a path to final-list following this option. Event information in the final-list is used instead of searching earthquakes from catalog.</p></li>
</ul>
</section>
<section id="initialize-a-project-instance">
<h2>Initialize a project instance<a class="headerlink" href="#initialize-a-project-instance" title="Link to this heading">¶</a></h2>
<p><strong>To further understand the procedure of the command</strong>  <code class="docutils literal notranslate"><span class="pre">prf</span></code> <strong>, we recommend calculating PRFs with writing a Python script as following steps.</strong></p>
<p>First, let’s initialize a <code class="docutils literal notranslate"><span class="pre">RF</span></code>instance. In this instance, we can set parameters and calculate PRFs using functions of the class.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">seispy.rf</span><span class="w"> </span><span class="kn">import</span> <span class="n">RF</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">os.path</span><span class="w"> </span><span class="kn">import</span> <span class="n">join</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">obspy</span><span class="w"> </span><span class="kn">import</span> <span class="n">UTCDateTime</span>

<span class="n">pjt</span> <span class="o">=</span> <span class="n">RF</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="set-parameters">
<h2>Set parameters<a class="headerlink" href="#set-parameters" title="Link to this heading">¶</a></h2>
<p>Most of parameters are saved in the class <code class="docutils literal notranslate"><span class="pre">pjt.para</span></code>. All default parameters are shown as following</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">pjt</span><span class="o">.</span><span class="n">para</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;_datapath&#39;</span><span class="p">:</span> <span class="s1">&#39;/Users/xumj&#39;</span><span class="p">,</span>
<span class="s1">&#39;_rfpath&#39;</span><span class="p">:</span> <span class="s1">&#39;/Users/xumj&#39;</span><span class="p">,</span>
<span class="s1">&#39;_imagepath&#39;</span><span class="p">:</span> <span class="s1">&#39;/Users/xumj&#39;</span><span class="p">,</span>
<span class="s1">&#39;_catalogpath&#39;</span><span class="p">:</span> <span class="s1">&#39;/Users/xumj/.pyenv/versions/anaconda3-5.3.1/lib/python3.7/site-packages/seispy-1.1.8-py3.7.egg/seispy/data/EventCMT.dat&#39;</span><span class="p">,</span>
<span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
<span class="s1">&#39;tolerance&#39;</span><span class="p">:</span> <span class="mi">210</span><span class="p">,</span>
<span class="s1">&#39;dateformat&#39;</span><span class="p">:</span> <span class="s1">&#39;%Y.%j.%H.%M.%S&#39;</span><span class="p">,</span>
<span class="s1">&#39;date_begin&#39;</span><span class="p">:</span> <span class="mi">1976</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000000</span><span class="n">Z</span><span class="p">,</span>
<span class="s1">&#39;date_end&#39;</span><span class="p">:</span> <span class="mi">2019</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">11</span><span class="n">T14</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mf">15.365860</span><span class="n">Z</span><span class="p">,</span>
<span class="s1">&#39;magmin&#39;</span><span class="p">:</span> <span class="mf">5.5</span><span class="p">,</span>
<span class="s1">&#39;magmax&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="s1">&#39;dismin&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
<span class="s1">&#39;dismax&#39;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
<span class="s1">&#39;ref_comp&#39;</span><span class="p">:</span> <span class="s1">&#39;BHZ&#39;</span><span class="p">,</span>
<span class="s1">&#39;suffix&#39;</span><span class="p">:</span> <span class="s1">&#39;SAC&#39;</span><span class="p">,</span>
<span class="s1">&#39;noisegate&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
<span class="s1">&#39;gauss&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="s1">&#39;target_dt&#39;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
<span class="s1">&#39;phase&#39;</span><span class="p">:</span> <span class="s1">&#39;P&#39;</span><span class="p">,</span>
<span class="s1">&#39;time_before&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="s1">&#39;time_after&#39;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span>
<span class="s1">&#39;only_r&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
</pre></div>
</div>
<p>Thus, we can set them in our scripts</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pjt</span><span class="o">.</span><span class="n">para</span><span class="o">.</span><span class="n">datapath</span> <span class="o">=</span> <span class="s1">&#39;Data/Path/to/station_name&#39;</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">para</span><span class="o">.</span><span class="n">rfpath</span> <span class="o">=</span> <span class="s1">&#39;Result/Path/to/station_name&#39;</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">para</span><span class="o">.</span><span class="n">suffix</span> <span class="o">=</span> <span class="s1">&#39;sac&#39;</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">para</span><span class="o">.</span><span class="n">ref_comp</span> <span class="o">=</span> <span class="s2">&quot;.1.&quot;</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">date_begin</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="s1">&#39;20180701&#39;</span><span class="p">)</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">date_end</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="s1">&#39;20190701&#39;</span><span class="p">)</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">para</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">para</span><span class="o">.</span><span class="n">tolerance</span> <span class="o">=</span> <span class="mi">60</span>
</pre></div>
</div>
<p>or in a configure file as above. When you want to initialize an instance using this configure file, please add the path to <code class="docutils literal notranslate"><span class="pre">RF()</span></code> as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pjt</span> <span class="o">=</span> <span class="n">RF</span><span class="p">(</span><span class="n">cfg_file</span><span class="o">=</span><span class="s1">&#39;path/to/config&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="search-earthquakes-from-catalog">
<h2>Search earthquakes from catalog<a class="headerlink" href="#search-earthquakes-from-catalog" title="Link to this heading">¶</a></h2>
<p>We use the same procedure as the <a class="reference external" href="https://git.nju.edu.cn/xumi1993/SplitRFLab">SplitRFLab</a>. To match the data records and events, we should search earthquakes with some criteria (period, epicentral distance and magnitude).</p>
<section id="load-station-information">
<h3>Load station information<a class="headerlink" href="#load-station-information" title="Link to this heading">¶</a></h3>
<p>the The station latitude and longitude are absolutely necessary when we are used to search earthquakes. the function will read <code class="docutils literal notranslate"><span class="pre">stla</span></code> and <code class="docutils literal notranslate"><span class="pre">stlo</span></code> of SAC header from files in <code class="docutils literal notranslate"><span class="pre">pjt.para.datapath</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pjt</span><span class="o">.</span><span class="n">load_stainfo</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="search-earthquakes">
<h2>Search earthquakes<a class="headerlink" href="#search-earthquakes" title="Link to this heading">¶</a></h2>
<p>the function provide two method to search earthquakes. use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pjt</span><span class="o">.</span><span class="n">search_eq</span><span class="p">()</span>
</pre></div>
</div>
<p>to search earthquakes in IRIS Web service with the CMT catalog.</p>
<p>In addition, the function allow to prepare earthquakes from a CMT catalog file (defaults to <code class="docutils literal notranslate"><span class="pre">seispy/seispy/data/EventCMT.dat</span></code>). Use command <code class="docutils literal notranslate"><span class="pre">updatecatalog</span></code> to update this default catalog file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pjt</span><span class="o">.</span><span class="n">search_eq</span><span class="p">(</span><span class="n">local</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="associate-sac-files-with-events">
<h2>Associate SAC files with events<a class="headerlink" href="#associate-sac-files-with-events" title="Link to this heading">¶</a></h2>
<p>This is a important step, which allow to link SAC files and earthquakes in catalog. The <code class="docutils literal notranslate"><span class="pre">pjt.para.dateformat</span></code>, that is a format string as in <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime">time.strftime</a>, including <code class="docutils literal notranslate"><span class="pre">datetime</span></code> information will allow to match events in catalog. For example, assuming the filename is <code class="docutils literal notranslate"><span class="pre">2018.229.15.35.02.1.sac</span></code>. the <code class="docutils literal notranslate"><span class="pre">pjt.para.dateformat</span></code> should be <code class="docutils literal notranslate"><span class="pre">%Y.%j.%H.%M.%S</span></code>.</p>
<p>A reference sac file will read to Associate with events. Thus, file-search-string will help to find real SAC files in data path. In this program file-search-string composed of <code class="docutils literal notranslate"><span class="pre">pjt.para.ref_comp</span></code> and <code class="docutils literal notranslate"><span class="pre">pjt.para.suffix</span></code>. The presence of <code class="docutils literal notranslate"><span class="pre">*pjt.para.ref_comp*pjt.para.suffix</span></code>, such as <code class="docutils literal notranslate"><span class="pre">*.1.*sac</span></code> in this example, for SAC files will be found.</p>
<p>the <code class="docutils literal notranslate"><span class="pre">pjt.para.offset</span></code> and <code class="docutils literal notranslate"><span class="pre">pjt.para.tolerance</span></code> are used to match the origin time from catalog. The definition are the same as those in <a class="reference external" href="https://git.nju.edu.cn/xumi1993/SplitRFLab">SplitRFLab</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">offset</span></code> is the time duration between the event time and the starting time of your seismograms. Ideally, this offset should be identical to the “request start time” defined in the previous window but the data management center may have sent you data beginning later than requested. The offset value represents this difference.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Tolerance</span></code> value in seconds will define the time window within which the program will try to associate a seismic file to an event file, by using either its name or the information contained in the header. It is up to the user to find the best compromise: a value too small will let orphans and a value too large will bring confusion since several files could be associated to a seismic event.</p></li>
</ul>
</div>
<figure class="align-center" id="id1">
<img alt="offset" src="../_images/offset.png" />
<figcaption>
<p><span class="caption-text">After setting up these parameters, use following command to associate data records to the catalog:</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pjt</span><span class="o">.</span><span class="n">match_eq</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="pre-processing">
<h2>Pre-processing<a class="headerlink" href="#pre-processing" title="Link to this heading">¶</a></h2>
<p>The process of pretreatment include detrend, bandpass filter, calculating arrival time, reject bad record with low SNR, trim records and rotate components from NE to RT.</p>
<section id="filter">
<h3>Filter<a class="headerlink" href="#filter" title="Link to this heading">¶</a></h3>
<p>We will apply a bandpass filter on seismic records. Two corners should be specified.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">para.freqmin</span></code>: Pass band low corner frequency.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">para.freqmax</span></code>: Pass band high corner frequency.</p></li>
</ul>
</section>
<section id="signal-noise-ratios-snr-calculation">
<h3>Signal-noise-ratios (SNR) calculation<a class="headerlink" href="#signal-noise-ratios-snr-calculation" title="Link to this heading">¶</a></h3>
<p>seismic records with poor quality will be rejected in this step. We will reject records with SNR &lt; <code class="docutils literal notranslate"><span class="pre">para.noisegate</span></code>. The SNR was calculated as:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[  SNR = 10log_{10}\left(\frac{A_S}{A_N}\right)\]</div>
</div>
<p>where <span class="math notranslate nohighlight">\(A_N\)</span> and <span class="math notranslate nohighlight">\(A_N\)</span> are root mean squares (RMS) of the waveform trimmed with time length of <code class="docutils literal notranslate"><span class="pre">para.noiselen</span></code> before and after theoretical P arrival times, respectively.</p>
</section>
<section id="trim">
<h3>Trim<a class="headerlink" href="#trim" title="Link to this heading">¶</a></h3>
<p>The waveforms will be cut in this step before <code class="docutils literal notranslate"><span class="pre">para.time_before</span></code> and after <code class="docutils literal notranslate"><span class="pre">para.time_after</span></code> theoretical P arrival times, respectively.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pjt</span><span class="o">.</span><span class="n">detrend</span><span class="p">()</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">filter</span><span class="p">()</span> <span class="c1"># default using &#39;para.freqmin&#39; and &#39;para.freqmax&#39;</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">cal_phase</span><span class="p">()</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">drop_eq_snr</span><span class="p">()</span> <span class="c1"># The threshold used as &#39;para.noisegate&#39;</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span> <span class="c1"># from &#39;para.time_before&#39; before P to &#39;para.time_after&#39; after P</span>
<span class="n">pjt</span><span class="o">.</span><span class="n">rotate</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="saving-and-loading-this-project">
<h2>Saving and loading this project<a class="headerlink" href="#saving-and-loading-this-project" title="Link to this heading">¶</a></h2>
<section id="save-this-project">
<h3>Save this project<a class="headerlink" href="#save-this-project" title="Link to this heading">¶</a></h3>
<p>The class <code class="docutils literal notranslate"><span class="pre">RF</span></code> provided method to save the parameters and associated seismic events.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pjt</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;path/to/pjt.pkl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">pkl</span></code> file will be saved into local path, which include the subclass <code class="docutils literal notranslate"><span class="pre">pjt.para</span></code> and <code class="docutils literal notranslate"><span class="pre">pjt.eqs</span></code>. The <code class="docutils literal notranslate"><span class="pre">pjt.eqs</span></code> is a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> instance with following columns</p>
<div class="table-wrapper docutils container" id="id2">
<table class="docutils align-center" id="id2">
<caption><span class="caption-text">Saved columns of the <code class="docutils literal notranslate"><span class="pre">pjt.eqs</span></code></span><a class="headerlink" href="#id2" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Implication</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">date</span></code></p></td>
<td><p>Origin time of the event</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">evla</span></code></p></td>
<td><p>Latitude of the event</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">evlo</span></code></p></td>
<td><p>Longitude of the event</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">evdp</span></code></p></td>
<td><p>Focal depth of the event</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mag</span></code></p></td>
<td><p>Magnitude of the event</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bazi</span></code></p></td>
<td><p>Back-azimuth between the station and the event</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dis</span></code></p></td>
<td><p>Great arc distance between the station and the event</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">datestr</span></code></p></td>
<td><p>Datetime field in the associated SAC filename</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="load-this-project">
<h3>Load this project<a class="headerlink" href="#load-this-project" title="Link to this heading">¶</a></h3>
<p>Create a new project and load the save project file for RF recalculation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">newpjt</span> <span class="o">=</span> <span class="n">RF</span><span class="p">()</span>
<span class="n">newpjt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;path/to/pjt.pkl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The waveform data will not be saved into file. So please ensure that the data files are exists in the <code class="docutils literal notranslate"><span class="pre">newpjt.para.datapath</span></code>.</p></li>
<li><p>The data files will be reload via <code class="docutils literal notranslate"><span class="pre">newpjt.load('path/to/pjt.pkl')</span></code>. Thus the pretreatment is necessary in recalculation.</p></li>
</ul>
</div>
</section>
</section>
<section id="prfs-calculation">
<h2>PRFs calculation<a class="headerlink" href="#prfs-calculation" title="Link to this heading">¶</a></h2>
<p>We need parameters of <code class="docutils literal notranslate"><span class="pre">pjt.para.gauss</span></code>, <code class="docutils literal notranslate"><span class="pre">pjt.para.itmax</span></code> and <code class="docutils literal notranslate"><span class="pre">pjt.para.minderr</span></code> to calculate PRFs using iterative time-domain deconvolution method</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pjt.para.gauss</span></code>: Gauss factor. Default is 2.0.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pjt.para.itmax</span></code>: The maximum number of iterations. Default is 400.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pjt.para.minderr</span></code>: The minimum misfit. Default is 0.001.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pjt</span><span class="o">.</span><span class="n">deconv</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="save-prfs">
<h2>Save PRFs<a class="headerlink" href="#save-prfs" title="Link to this heading">¶</a></h2>
<p>Save the PRFs to <code class="docutils literal notranslate"><span class="pre">pjt.para.rfpath</span></code> with some criteria. Two kind of criteria allow to set (i.e., <code class="docutils literal notranslate"><span class="pre">crust</span></code> or <code class="docutils literal notranslate"><span class="pre">mtz</span></code>). if the parameter set as None, all of PRFs will be saved.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">crust</span></code></p>
<ul>
<li><p>The maximum peak should appear between -2s and 2s.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">mtz</span></code></p>
<ul>
<li><p>The maximum peak should appear between -5s and 5s.</p></li>
<li><p>the maximum amplitudes of PRFs in a 30–120 s window after the direct P are smaller than 30% of the maximum amplitudes of the direct P phases.</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pjt</span><span class="o">.</span><span class="n">saverf</span><span class="p">(</span><span class="n">criterion</span><span class="o">=</span><span class="s1">&#39;crust&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="rf-from-ws.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Fetch seismic data from web-service and calculate RF automatically</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="PRF_Process.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Calculate a P-wave Receiver Function (PRF)</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2020, Mijian Xu
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Calculate PRFs for single station</a><ul>
<li><a class="reference internal" href="#prepare-seismic-records-order-by-stations">Prepare seismic records order by stations</a></li>
<li><a class="reference internal" href="#calculate-prfs-using-a-simple-command">Calculate PRFs using a simple command</a><ul>
<li><a class="reference internal" href="#prepare-a-configure-file">Prepare a configure file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#run-in-command-line">Run in command line</a></li>
<li><a class="reference internal" href="#initialize-a-project-instance">Initialize a project instance</a></li>
<li><a class="reference internal" href="#set-parameters">Set parameters</a></li>
<li><a class="reference internal" href="#search-earthquakes-from-catalog">Search earthquakes from catalog</a><ul>
<li><a class="reference internal" href="#load-station-information">Load station information</a></li>
</ul>
</li>
<li><a class="reference internal" href="#search-earthquakes">Search earthquakes</a></li>
<li><a class="reference internal" href="#associate-sac-files-with-events">Associate SAC files with events</a></li>
<li><a class="reference internal" href="#pre-processing">Pre-processing</a><ul>
<li><a class="reference internal" href="#filter">Filter</a></li>
<li><a class="reference internal" href="#signal-noise-ratios-snr-calculation">Signal-noise-ratios (SNR) calculation</a></li>
<li><a class="reference internal" href="#trim">Trim</a></li>
</ul>
</li>
<li><a class="reference internal" href="#saving-and-loading-this-project">Saving and loading this project</a><ul>
<li><a class="reference internal" href="#save-this-project">Save this project</a></li>
<li><a class="reference internal" href="#load-this-project">Load this project</a></li>
</ul>
</li>
<li><a class="reference internal" href="#prfs-calculation">PRFs calculation</a></li>
<li><a class="reference internal" href="#save-prfs">Save PRFs</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=ab1ebb28"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>